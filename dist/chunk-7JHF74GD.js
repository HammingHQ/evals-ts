import{a as f}from"./chunk-GQSCBKA6.js";var h=class{constructor(e){f(this,"retries");f(this,"retryDelay");f(this,"retryOn");let s={...{retries:3,retryDelay:1e3,retryOn:[]},...e};this.validateDefaults(s),this.retries=s.retries,this.retryDelay=s.retryDelay,this.retryOn=s.retryOn}validateDefaults(e){if(e.retries!==void 0&&!this.isPositiveInteger(e.retries))throw new u("retries must be a positive integer");if(e.retryDelay!==void 0&&!this.isPositiveInteger(e.retryDelay)&&typeof e.retryDelay!="function")throw new u("retryDelay must be a positive integer or a function returning a positive integer");if(e.retryOn!==void 0&&!Array.isArray(e.retryOn)&&typeof e.retryOn!="function")throw new u("retryOn property expects an array or function")}isPositiveInteger(e){return Number.isInteger(e)&&e>=0}fetchRetry(e,t){let s=this.retries,o=this.retryDelay,i=this.retryOn;return t&&(t.retries!==void 0&&this.isPositiveInteger(t.retries)&&(s=t.retries),t.retryDelay!==void 0&&(this.isPositiveInteger(t.retryDelay)||typeof t.retryDelay=="function")&&(o=t.retryDelay),t.retryOn&&(Array.isArray(t.retryOn)||typeof t.retryOn=="function")&&(i=t.retryOn)),new Promise((c,l)=>{let D=n=>{let R=e instanceof Request?e.clone():e;fetch(R,t).then(r=>{Array.isArray(i)&&!i.includes(r.status)?c(r):typeof i=="function"?Promise.resolve(i(n,null,r)).then(y=>{y?a(n,null,r):c(r)}).catch(l):n<s?a(n,null,r):c(r)}).catch(r=>{typeof i=="function"?Promise.resolve(i(n,r,null)).then(y=>{y?a(n,r,null):l(r)}).catch(l):n<s?a(n,r,null):l(r)})},a=(n,R,r)=>{let y=typeof o=="function"?o(n,R,r,e):o;setTimeout(()=>{D(++n)},y)};D(0)})}},u=class extends Error{constructor(e){super(e),this.name="ArgumentError"}},p=h;export{p as a};
//# sourceMappingURL=chunk-7JHF74GD.js.map