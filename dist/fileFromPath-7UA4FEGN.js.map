{"version":3,"sources":["../node_modules/node-domexception/index.js","../node_modules/formdata-node/lib/esm/fileFromPath.js","../node_modules/formdata-node/lib/esm/isPlainObject.js"],"sourcesContent":["/*! node-domexception. MIT License. Jimmy WÃ¤rting <https://jimmy.warting.se/opensource> */\n\nif (!globalThis.DOMException) {\n  try {\n    const { MessageChannel } = require('worker_threads'),\n    port = new MessageChannel().port1,\n    ab = new ArrayBuffer()\n    port.postMessage(ab, [ab, ab])\n  } catch (err) {\n    err.constructor.name === 'DOMException' && (\n      globalThis.DOMException = err.constructor\n    )\n  }\n}\n\nmodule.exports = globalThis.DOMException\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _FileFromPath_path, _FileFromPath_start;\nimport { statSync, createReadStream, promises as fs } from \"fs\";\nimport { basename } from \"path\";\nimport DOMException from \"node-domexception\";\nimport { File } from \"./File.js\";\nimport isPlainObject from \"./isPlainObject.js\";\nexport * from \"./isFile.js\";\nconst MESSAGE = \"The requested file could not be read, \"\n    + \"typically due to permission problems that have occurred after a reference \"\n    + \"to a file was acquired.\";\nclass FileFromPath {\n    constructor(input) {\n        _FileFromPath_path.set(this, void 0);\n        _FileFromPath_start.set(this, void 0);\n        __classPrivateFieldSet(this, _FileFromPath_path, input.path, \"f\");\n        __classPrivateFieldSet(this, _FileFromPath_start, input.start || 0, \"f\");\n        this.name = basename(__classPrivateFieldGet(this, _FileFromPath_path, \"f\"));\n        this.size = input.size;\n        this.lastModified = input.lastModified;\n    }\n    slice(start, end) {\n        return new FileFromPath({\n            path: __classPrivateFieldGet(this, _FileFromPath_path, \"f\"),\n            lastModified: this.lastModified,\n            size: end - start,\n            start\n        });\n    }\n    async *stream() {\n        const { mtimeMs } = await fs.stat(__classPrivateFieldGet(this, _FileFromPath_path, \"f\"));\n        if (mtimeMs > this.lastModified) {\n            throw new DOMException(MESSAGE, \"NotReadableError\");\n        }\n        if (this.size) {\n            yield* createReadStream(__classPrivateFieldGet(this, _FileFromPath_path, \"f\"), {\n                start: __classPrivateFieldGet(this, _FileFromPath_start, \"f\"),\n                end: __classPrivateFieldGet(this, _FileFromPath_start, \"f\") + this.size - 1\n            });\n        }\n    }\n    get [(_FileFromPath_path = new WeakMap(), _FileFromPath_start = new WeakMap(), Symbol.toStringTag)]() {\n        return \"File\";\n    }\n}\nfunction createFileFromPath(path, { mtimeMs, size }, filenameOrOptions, options = {}) {\n    let filename;\n    if (isPlainObject(filenameOrOptions)) {\n        [options, filename] = [filenameOrOptions, undefined];\n    }\n    else {\n        filename = filenameOrOptions;\n    }\n    const file = new FileFromPath({ path, size, lastModified: mtimeMs });\n    if (!filename) {\n        filename = file.name;\n    }\n    return new File([file], filename, {\n        ...options, lastModified: file.lastModified\n    });\n}\nexport function fileFromPathSync(path, filenameOrOptions, options = {}) {\n    const stats = statSync(path);\n    return createFileFromPath(path, stats, filenameOrOptions, options);\n}\nexport async function fileFromPath(path, filenameOrOptions, options) {\n    const stats = await fs.stat(path);\n    return createFileFromPath(path, stats, filenameOrOptions, options);\n}\n","const getType = (value) => (Object.prototype.toString.call(value).slice(8, -1).toLowerCase());\nfunction isPlainObject(value) {\n    if (getType(value) !== \"object\") {\n        return false;\n    }\n    const pp = Object.getPrototypeOf(value);\n    if (pp === null || pp === undefined) {\n        return true;\n    }\n    const Ctor = pp.constructor && pp.constructor.toString();\n    return Ctor === Object.toString();\n}\nexport default isPlainObject;\n"],"mappings":"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","names":["require_node_domexception","__commonJSMin","exports","module","MessageChannel","port","ab","err","import_node_domexception","statSync","createReadStream","fs","basename","getType","value","isPlainObject","pp","isPlainObject_default","__classPrivateFieldSet","receiver","state","value","kind","f","__classPrivateFieldGet","_FileFromPath_path","_FileFromPath_start","MESSAGE","FileFromPath","_FileFromPath","input","basename","start","end","mtimeMs","fs","DOMException","createReadStream","createFileFromPath","path","size","filenameOrOptions","options","filename","isPlainObject_default","file","File","fileFromPathSync","stats","statSync","fileFromPath"]}