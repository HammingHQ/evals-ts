import{a as t,b as h}from"./chunk-OXHECJZ4.js";var f=429,g=500,d=class{constructor(e){t(this,"apiKey");t(this,"baseURL");t(this,"fetchClient");t(this,"debug",!1);t(this,"retries",3);this.apiKey=e.apiKey,this.baseURL=this.sanitizeBaseUrl(e.baseURL),this.fetchClient=new h,this.debug=process.env.NODE_ENV==="development"}sanitizeBaseUrl(e){return e.trim().replace(/\/$/,"")}async fetch(e,o){let a=this.baseURL+e,s={...o,headers:{...o?.headers,"Content-Type":o?.headers?.["Content-Type"]??"application/json",authorization:`Bearer ${this.apiKey}`}},p=this.retries,c=this.debug;c&&(console.log(`
`),console.debug(`Fetching URL: ${a}`),console.debug(`Method: ${s.method||"GET"}`),s.body&&console.debug(`Body: ${s.body}`),console.debug(`Headers: ${JSON.stringify(s.headers,null,2)}`));let u=await this.fetchClient.fetchRetry(a,{...s,retryOn:function(i,l,r){if(i>=p)return!1;let n=r?.status;return l instanceof TypeError||n===f||n!==void 0&&n>=g},retryDelay:function(i,l,r,n){return c&&console.debug(`Fetch attempt #${i}: input=${n}, error=${l?.message}, response status=${r?.status}, response status text=${r?.statusText}`),Math.pow(2,i)*1e3}});return c&&(console.debug(`Response for ${a}: ${u.status} ${u.statusText}`),console.debug(`
`)),u}};export{d as a};
//# sourceMappingURL=chunk-4WLIREK4.js.map